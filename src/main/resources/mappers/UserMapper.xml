<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.greengram.application.feed.UserMapper">

    <select id="findProfileByUserId">
        SELECT
        user_id,
        pic,
        created_at,
        uid,
        nick_name,
        (SELECT COUNT(*) FROM feed WHERE writer_user_id = #{signedUserId}) AS feedCount,
        (SELECT COUNT(*)
        FROM feed_like fl
        JOIN feed f ON fl.feed_id = f.feed_id
        WHERE f.writer_user_id = #{signedUserId}
        ) AS allFeedLikeCount
        FROM user
        WHERE user_id = #{signedUserId};
    </select>
</mapper>